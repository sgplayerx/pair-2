<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SG PLAYER â€¢ VIP Ultra Pro Max</title>

  <!-- Primary Meta Tags -->
  <meta name="title" content="SG PLAYER â€¢ VIP Ultra Pro Max" />
  <meta name="description" content="SG PLAYER VIP: Generate secure WhatsApp MD pairing codes with a blazing-fast, mobile-first, premium UI." />
  <meta name="theme-color" content="#0a0e12" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SG PLAYER â€¢ VIP Ultra Pro Max" />
  <meta property="og:description" content="Generate secure WhatsApp MD pairing codes with a premium, polished interface." />
  <meta property="og:image" content="https://dummyimage.com/1200x630/0a0e12/eaeef5&text=Hissari+Boy+VIP" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="SG PLAYERâ€¢ VIP Ultra Pro Max" />
  <meta name="twitter:description" content="Generate secure WhatsApp MD pairing codes with a premium, polished interface." />
  <meta name="twitter:image" content="https://dummyimage.com/1200x630/0a0e12/eaeef5&text=Hissari+Boy+VIP" />

  <!-- Favicon - Crown -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Crect width='128' height='128' rx='28' ry='28' fill='%230a0e12'/%3E%3Cpath d='M20 92l88 0 0 12-88 0z' fill='%23212735'/%3E%3Cpath d='M24 84l80 0-10-36-18 18-12-26-12 26-18-18z' fill='%23f5d76e'/%3E%3Ccircle cx='40' cy='38' r='6' fill='%23ffd700'/%3E%3Ccircle cx='64' cy='30' r='6' fill='%23ffd700'/%3E%3Ccircle cx='88' cy='38' r='6' fill='%23ffd700'/%3E%3C/svg%3E" />

  <style>
    /* ==== VIP Theme CSS ==== */
    :root{
      --bg:#0a0e12;
      --card:rgba(17,22,29,.9);
      --text:#eaeef5;
      --muted:#96a0ad;
      --brand:#f5d76e; /* VIP gold */
      --brand-2:#00e7d4;
      --border:rgba(255,255,255,.08);
      --input:#121821;
      --success:#18c58f;
      --danger:#ff5a7a;
      --glow:0 0 24px rgba(245,215,110,.22);
      --shadow:0 18px 44px rgba(0,0,0,.5);
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f7fafc;--card:#fff;--text:#0b1420;--muted:#586171;--border:rgba(0,0,0,.08);
        --input:#eff3f7;--shadow:0 12px 28px rgba(0,0,0,.12);
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, "SF Pro Text", "Segoe UI", Roboto, system-ui, -apple-system, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(60rem 60rem at -10% -20%, color-mix(in oklab, var(--brand) 35%, transparent), transparent 40%),
        radial-gradient(60rem 60rem at 120% 120%, color-mix(in oklab, var(--brand-2) 35%, transparent), transparent 42%),
        var(--bg);
      display:grid;place-items:center;padding:32px 16px;
    }
    .wrap{
      width:100%;max-width:760px;background:var(--card);border:1px solid var(--border);
      border-radius:24px;padding:28px;box-shadow:var(--shadow);backdrop-filter:saturate(1.2) blur(7px);
      animation:pop .4s ease-out;
    }
    @keyframes pop{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    header{display:grid;justify-items:center;text-align:center;gap:8px;margin-bottom:14px}
    .logo{
      display:inline-grid;place-items:center;width:64px;height:64px;border-radius:18px;background:linear-gradient(135deg, #2b3240, #1a2030);
      border:1px solid var(--border); box-shadow: var(--glow);
    }
    .logo span{font-size:30px;filter:drop-shadow(0 2px 10px rgba(245,215,110,.5))}
    h1{margin:6px 0 0;font-size:clamp(22px,3.6vw,36px);letter-spacing:.3px}
    .badge{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;
      border:1px solid var(--border);background:rgba(245,215,110,.08);font-size:12px;color:var(--muted);
    }
    .badge b{color:var(--brand);letter-spacing:.6px}
    .tag{font-size:14px;color:var(--muted)}

    form{display:grid;gap:12px;margin-top:10px}
    label{font-size:13px;color:var(--muted)}
    .row{display:grid;gap:12px;grid-template-columns:1fr}
    @media(min-width:560px){.row{grid-template-columns:1fr auto;align-items:end}}
    input[type="tel"]{
      width:100%;padding:14px;border-radius:14px;border:1px solid var(--border);background:var(--input);color:inherit;outline:none;
      transition:border-color .2s, box-shadow .2s;
    }
    input[type="tel"]::placeholder{color:color-mix(in oklab, var(--muted) 80%, var(--text))}
    input[type="tel"]:focus{border-color:color-mix(in oklab, var(--brand) 70%, var(--border));box-shadow:0 0 0 4px color-mix(in oklab, var(--brand) 18%, transparent)}

    button{
      padding:14px 18px;border:0;border-radius:14px;font-weight:800;letter-spacing:.6px;text-transform:uppercase;cursor:pointer;
      background:linear-gradient(135deg, var(--brand), var(--brand-2));color:#0a0e12;box-shadow:var(--shadow);transition:transform .18s, filter .18s;
    }
    button:hover{transform:translateY(-2px)}
    button:active{transform:translateY(0);filter:saturate(.9)}
    .hint{font-size:12px;color:var(--muted)}

    .result{margin-top:18px;display:none;word-wrap:break-word;background:color-mix(in oklab, var(--card) 92%, transparent);
      border:1px dashed var(--border);border-radius:14px;padding:16px;font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}
    .result.visible{display:grid;gap:10px}

    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .actions button{
      background:transparent;color:var(--text);border:1px solid var(--border);text-transform:none;letter-spacing:0;padding:10px 12px;box-shadow:none
    }
    .actions button:hover{border-color:color-mix(in oklab, var(--brand) 60%, var(--border))}

    .qr{display:none;justify-content:center;margin-top:16px}
    .qr.visible{display:flex}
    #qrcode{width:208px;height:208px;background:#fff;border-radius:12px;padding:10px}

    footer{text-align:center;color:var(--muted);font-size:12px;margin-top:22px}
    .toast{position:fixed;inset:auto 16px 16px auto;background:var(--card);color:var(--text);border:1px solid var(--border);padding:12px 14px;border-radius:12px;box-shadow:var(--shadow);display:none;z-index:9999}
    .toast.show{display:block}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>

  <!-- QR Code Library -->
  <script defer src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/build/qrcode.min.js"></script>
</head>
<body>
  <main class="wrap" role="main" aria-labelledby="title">
    <header>
      <div class="logo" aria-hidden="true"><span>ðŸª™</span></div>
      <h1 id="title">SG PLAYER <span class="sr-only">VIP</span></h1>
      <div class="badge" aria-label="VIP Ultra Pro Max badge"><b>VIP</b> Ultra Pro Max</div>
      <p class="tag">Premium pairing for WhatsApp MD â€” fast, secure, mobile-first.</p>
    </header>

    <form id="pairForm" novalidate>
      <label for="number">WhatsApp Number (with country code)</label>
      <div class="row">
        <input id="number" name="number" type="tel" inputmode="numeric" autocomplete="tel"
               placeholder="e.g., 923001234567" aria-describedby="hint"
               pattern="^[0-9]{9,15}$" required />
        <button id="submitBtn" type="submit">Generate</button>
      </div>
      <div id="hint" class="hint">Digits only, 9â€“15 characters, include country code (e.g., 92â€¦)</div>
    </form>

    <section id="result" class="result" aria-live="polite" aria-atomic="true">
      <div id="codeText">â€”</div>
      <div class="actions">
        <button type="button" id="copyBtn">Copy Code</button>
        <button type="button" id="refreshBtn">Refresh</button>
      </div>
    </section>

    <div class="qr" id="qrWrap" aria-hidden="true">
      <div id="qrcode" role="img" aria-label="QR Code for pairing"></div>
    </div>

    <footer>ðŸª™ SG PLAYER â€¢ VIP Ultra Pro Max Edition</footer>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // ===== Configuration =====
    // Set your API base if hosted separately
    // Example: const API_BASE = "https://hissari-boy-api.vercel.app";
    const API_BASE = "";
    const ENDPOINT = "/code";

    // ===== Helpers =====
    const $ = (s)=>document.querySelector(s);
    const escapeHTML = (str)=>str.replace(/[&<>"'`=\/]/g, (s)=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;","`":"&#96;","=":"&#61;","/":"&#47;"}[s]));
    const toast=(msg,type="info")=>{const t=$("#toast");t.textContent=msg;t.style.borderColor=type==="error"?"var(--danger)":type==="success"?"var(--success)":"var(--border)";t.classList.add("show");setTimeout(()=>t.classList.remove("show"),2600)};
    const setLoading=(b)=>{const btn=$("#submitBtn");btn.disabled=b;btn.textContent=b?"Generatingâ€¦":"Generate"};

    // ===== QR =====
    let lastCode="";
    async function renderQR(text){
      const wrap=$("#qrWrap");const node=$("#qrcode");
      node.innerHTML="";wrap.classList.add("visible");
      try{
        if(window.QRCode){await QRCode.toCanvas(node,text,{width:208,margin:1});}
        else{const c=document.createElement("canvas");c.width=208;c.height=208;const ctx=c.getContext("2d");ctx.fillStyle="#fff";ctx.fillRect(0,0,208,208);ctx.fillStyle="#000";ctx.font="14px monospace";ctx.fillText("QR Fallback",62,30);ctx.fillText(text.slice(0,22),16,110);node.appendChild(c);}
      }catch(e){console.error(e);toast("Couldn't render QR. Showing text only.","error");wrap.classList.remove("visible");}
    }

    // ===== API =====
    async function requestCode(number){
      const url=(API_BASE+ENDPOINT)+"?number="+encodeURIComponent(number);
      const res=await fetch(url,{headers:{"Accept":"application/json"}});
      if(!res.ok){let msg=res.statusText||"Request failed";try{const j=await res.json();if(j&&j.error) msg=j.error;}catch(_){}throw new Error(msg);}
      return res.json();
    }

    function showCode(code){
      lastCode=code;$("#codeText").textContent="âœ… Pairing Code: "+code;$("#result").classList.add("visible");
    }

    async function handleSubmit(e){
      e.preventDefault();
      const input=$("#number");const number=(input.value||"").trim();
      if(!number||!/^[0-9]{9,15}$/.test(number)){toast("Enter digits only (9â€“15), incl. country code.","error");input.focus();return;}
      setLoading(true);$("#qrWrap").classList.remove("visible");$("#result").classList.remove("visible");
      try{
        const data=await requestCode(number);
        if(data&&data.code){showCode(escapeHTML(data.code));toast("Code generated & copied","success");try{await navigator.clipboard.writeText(data.code);}catch(_){}renderQR(data.code);}
        else if(data&&data.error){toast(data.error,"error");}
        else{toast("Unknown response from server.","error");}
      }catch(err){toast("Failed: "+(err.message||err),"error");}
      finally{setLoading(false);}
    }

    // ===== Actions =====
    $("#pairForm").addEventListener("submit", handleSubmit);
    $("#copyBtn").addEventListener("click", async ()=>{
      if(!lastCode) return;
      try{await navigator.clipboard.writeText(lastCode);toast("Copied!","success");}
      catch(_){toast("Copy failed. Select & copy manually.","error");}
    });
    $("#refreshBtn").addEventListener("click", ()=>{$("#pairForm").dispatchEvent(new Event("submit",{cancelable:true,bubbles:true}));});
  </script>
</body>
</html>